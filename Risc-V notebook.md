**RISC-Væ¶æ„ä¸­ï¼šæ‰€æœ‰çš„æ•´æ•°æœ‰ç¬¦å·æ•°ï¼Œå‡ç”±äºŒè¿›åˆ¶è¡¥ç è¡¨ç¤º**

å…­ç§åŸºæœ¬æŒ‡ä»¤æ ¼å¼ï¼Œåˆ†åˆ«æ˜¯ï¼š

- ç”¨äº**å¯„å­˜å™¨-å¯„å­˜å™¨**æ“ä½œçš„ **R     ç±»å‹æŒ‡ä»¤** 
- ç”¨äº**çŸ­ç«‹å³æ•°å’Œè®¿å­˜     load**æ“ä½œçš„**     I å‹æŒ‡ä»¤**
- ç”¨äº**è®¿å­˜     store**æ“ä½œçš„     **S å‹æŒ‡ä»¤** 
- ç”¨äº**æ¡ä»¶è·³è½¬**æ“ä½œçš„ **B     ç±»å‹æŒ‡ä»¤** 
- ç”¨äº**é•¿ç«‹å³æ•°**çš„ **U     å‹æŒ‡ä»¤** 
- ç”¨äº**æ— æ¡ä»¶è·³è½¬**çš„ **J     å‹æŒ‡ä»¤**

### RI32

âš« 32 ä½å­—èŠ‚å¯å¯»å€çš„åœ°å€ç©ºé—´

 âš« æ‰€æœ‰æŒ‡ä»¤å‡ä¸º 32 ä½é•¿ 

âš« 31 ä¸ªå¯„å­˜å™¨ï¼Œå…¨éƒ¨ 32 ä½å®½ï¼Œå¯„å­˜å™¨ 0 ç¡¬è¿çº¿ä¸ºé›¶

 âš« æ‰€æœ‰æ“ä½œéƒ½åœ¨å¯„å­˜å™¨ä¹‹é—´ï¼ˆæ²¡æœ‰å¯„å­˜å™¨åˆ°å†…å­˜çš„æ“ä½œï¼‰ 

âš« åŠ è½½/å­˜å‚¨å­—åŠ ä¸Šæœ‰ç¬¦å·å’Œæ— ç¬¦å·åŠ è½½/å­˜å‚¨å­—èŠ‚å’ŒåŠå­—

 âš« æ‰€æœ‰ç®—æœ¯ï¼Œé€»è¾‘å’Œç§»ä½æŒ‡ä»¤éƒ½æœ‰ç«‹å³æ•°ç‰ˆæœ¬çš„æŒ‡ä»¤ 

âš« ç«‹å³æ•°æ€»æ˜¯ç¬¦å·æ‰©å±•

 âš« ä»…æä¾›ä¸€ç§æ•°æ®å¯»å€æ¨¡å¼ï¼ˆå¯„å­˜å™¨+ç«‹å³æ•°ï¼‰å’Œ PC ç›¸å¯¹åˆ†æ”¯

 âš« æ— ä¹˜æ³•æˆ–é™¤æ³•æŒ‡ä»¤ 

 âš« ä¸€ä¸ªæŒ‡ä»¤ï¼Œç”¨äºå°†å¤§ç«‹å³æ•°åŠ è½½åˆ°å¯„å­˜å™¨çš„é«˜ä½ï¼Œè¿™æ ·åŠ è½½ 32 ä½å¸¸é‡åˆ°å¯„å­˜å™¨åª éœ€è¦ä¸¤æ¡æŒ‡ä»¤ 

- 
[**RISC-V å¸¸è§æŒ‡ä»¤**](https://www.cnblogs.com/truelycloud/p/10807398.html)

**ç®—æœ¯è¿ç®—**

**add rd, rs1, rs2**

x[rd] = x[rs1] + x[rs2]

æŠŠå¯„å­˜å™¨ x[rs2]åŠ åˆ°å¯„å­˜å™¨ x[rs1]ä¸Šï¼Œç»“æœå†™å…¥ x[rd]ã€‚å¿½ç•¥ç®—æœ¯æº¢å‡ºã€‚

 

**addi rd, rs1, immediate**

x[rd] = x[rs1] + sext(immediate)

æŠŠç¬¦å·ä½æ‰©å±•çš„ç«‹å³æ•°åŠ åˆ°å¯„å­˜å™¨ x[rs1]ä¸Šï¼Œç»“æœå†™å…¥ x[rd]ã€‚å¿½ç•¥ç®—æœ¯æº¢å‡ºã€‚

 

**sub rd, rs1, rs2**

x[rd] = x[rs1] âˆ’ x[rs2]

x[rs1]å‡å» x[rs2]ï¼Œç»“æœå†™å…¥ x[rd]ã€‚å¿½ç•¥ç®—æœ¯æº¢å‡ºã€‚

 

**div rd, rs1, rs2**

x[rd] = x[rs1] Ã·s x[rs2]

ç”¨å¯„å­˜å™¨ x[rs1]çš„å€¼é™¤ä»¥å¯„å­˜å™¨ x[rs2]çš„å€¼ï¼Œå‘é›¶èˆå…¥ï¼Œå°†è¿™äº›æ•°è§†ä¸ºäºŒè¿›åˆ¶è¡¥ç ï¼ŒæŠŠå•†å†™ å…¥ x[rd]ã€‚

 

**mul rd, rs1, rs2**

x[rd] = x[rs1] Ã— x[rs2]

æŠŠå¯„å­˜å™¨ x[rs2]ä¹˜åˆ°å¯„å­˜å™¨ x[rs1]ä¸Šï¼Œä¹˜ç§¯å†™å…¥ x[rd]ã€‚å¿½ç•¥ç®—æœ¯æº¢å‡ºã€‚

 

**rem rd, rs1, rs2**

x[rd] = x[rs1] %ğ‘  x[rs2]

æ±‚ä½™æ•°ã€‚x[rs1]é™¤ä»¥ x[rs2]ï¼Œå‘ 0 èˆå…¥ï¼Œéƒ½è§†ä¸º 2 çš„è¡¥ç ï¼Œä½™æ•°å†™å…¥ x[rd]ã€‚

 

**neg rd, rs2**

x[rd] = âˆ’x[rs2]

æŠŠå¯„å­˜å™¨ x[rs2]çš„äºŒè¿›åˆ¶è¡¥ç å†™å…¥ x[rd]ã€‚

 

**é€»è¾‘è¿ç®—**

**and rd, rs1, rs2**

x[rd] = x[rs1] & x[rs2]

å°†å¯„å­˜å™¨ x[rs1]å’Œå¯„å­˜å™¨ x[rs2]ä½ä¸çš„ç»“æœå†™å…¥ x[rd]ã€‚

 

**andi rd, rs1, immediate**

x[rd] = x[rs1] & sext(immediate)

æŠŠç¬¦å·ä½æ‰©å±•çš„ç«‹å³æ•°å’Œå¯„å­˜å™¨ x[rs1]ä¸Šçš„å€¼è¿›è¡Œä½ä¸ï¼Œç»“æœå†™å…¥ x[rd]ã€‚

 

**or rd, rs1, rs2**

x[rd] = ~x[rs1]

æŠŠå¯„å­˜å™¨ x[rs1]å’Œå¯„å­˜å™¨ x[rs2]æŒ‰ä½å–æˆ–ï¼Œç»“æœå†™å…¥ x[rd]ã€‚

 

**xor rd, rs1, immediate**

x[rd] = x[rs1] ^ sext(immediate)

x[rs1]å’Œæœ‰ç¬¦å·æ‰©å±•çš„ immediate æŒ‰ä½å¼‚æˆ–ï¼Œç»“æœå†™å…¥ x[rd]ã€‚

 

**ä½è¿ç®—**

**sll rd, rs1, rs2**

x[rd] = x[rs1] â‰ª x[rs2]

é€»è¾‘å·¦ç§»ï¼ˆç©ºä½è¡¥0ï¼‰

 

**slli rd, rs1, shamt**

ç«‹å³æ•°é€»è¾‘å·¦ç§»

 

**srl rd, rs1, rs2**

x[rd] = (x[rs1] â‰«ğ‘¢ x[rs2])

é€»è¾‘å³ç§»ï¼ˆç©ºä½è¡¥0ï¼‰

 

**srli rd, rs1, shamt**

ç«‹å³æ•°é€»è¾‘å³ç§»

 

**sra rd, rs1, rs2**

x[rd] = (x[rs1] â‰«ğ‘  x[rs2])

ç®—æœ¯å³ç§»ï¼ˆç©ºä½ç”¨æœ€é«˜ä½å¡«å……ï¼‰

 

**srai rd, rs1, shamt**

ç«‹å³æ•°é€»è¾‘å³ç§»

 

**not td, rs1**

x[rd] = ~x[rs1]

æŠŠå¯„å­˜å™¨ x[rs1]å¯¹äº 1 çš„è¡¥ç ï¼ˆå³æŒ‰ä½å–åçš„å€¼ï¼‰å†™å…¥ x[rd]ã€‚å®é™…è¢«æ‰©å±•ä¸º xori rd, rs1, -1ã€‚

 

**æ¡ä»¶æ§åˆ¶æŒ‡ä»¤**

**beq rs1, rs2, offset**

if (rs1 == rs2) pc = sext(offset)

è‹¥å¯„å­˜å™¨ x[rs1]å’Œå¯„å­˜å™¨ x[rs2]çš„å€¼ç›¸ç­‰ï¼ŒæŠŠ pc çš„å€¼è®¾ä¸ºå½“å‰å€¼åŠ ä¸Šç¬¦å·ä½æ‰©å±•çš„åç§» offsetã€‚

 

**bge rs1, rs2, offset**

if (rs1 â‰¥s rs2) pc = sext(offset)

è‹¥å¯„å­˜å™¨ x[rs1]çš„å€¼å¤§äºç­‰äºå¯„å­˜å™¨ x[rs2]çš„å€¼ï¼ˆå‡è§†ä¸ºäºŒè¿›åˆ¶è¡¥ç ï¼‰ï¼ŒæŠŠ pc çš„å€¼è®¾ä¸ºå½“å‰ å€¼åŠ ä¸Šç¬¦å·ä½æ‰©å±•çš„åç§» offsetã€‚

 

**blt rs1, rs2, offset**

if (rs1 <s rs2) pc = sext(offset)

è‹¥å¯„å­˜å™¨ x[rs1]çš„å€¼å°äºå¯„å­˜å™¨ x[rs2]çš„å€¼ï¼ˆå‡è§†ä¸ºäºŒè¿›åˆ¶è¡¥ç ï¼‰ï¼ŒæŠŠ pc çš„å€¼è®¾ä¸ºå½“å‰å€¼åŠ  ä¸Šç¬¦å·ä½æ‰©å±•çš„åç§» offsetã€‚

 

**bne rs1, rs2, offset**

if (rs1 â‰  rs2) pc = sext(offset)

è‹¥å¯„å­˜å™¨ x[rs1]å’Œå¯„å­˜å™¨ x[rs2]çš„å€¼ä¸ç›¸ç­‰ï¼ŒæŠŠ pc çš„å€¼è®¾ä¸ºå½“å‰å€¼åŠ ä¸Šç¬¦å·ä½æ‰©å±•çš„åç§» offsetã€‚

 

**è·³è½¬æŒ‡ä»¤**

**j offset**

pc += sext(offset)

æŠŠ pc è®¾ç½®ä¸ºå½“å‰å€¼åŠ ä¸Šç¬¦å·ä½æ‰©å±•çš„ offsetï¼Œç­‰åŒäº jal x0, offsetã€‚

 

- jal(jump and link )     ä½¿ç”¨20ä½ç«‹å³æ•°ï¼ˆæœ‰ç¬¦å·ï¼‰ä½œä¸ºåç§»é‡ï¼ˆoffsetï¼‰ï¼Œè¯¥åç§»é‡ä¹˜ä»¥2ï¼Œç„¶åä¸**è¯¥æŒ‡ä»¤çš„PCç›¸åŠ **ï¼Œç”Ÿæˆå¾—åˆ°æœ€ç»ˆçš„è·³è½¬ç›®æ ‡åœ°å€ã€‚**å¯ä»¥è·³è½¬åˆ°å‰å1MBçš„åœ°å€åŒºé—´**ã€‚å°†ä¸‹ä¸€æ¡æŒ‡ä»¤PCï¼ˆå½“å‰PC+4)çš„å€¼ï¼Œå†™å…¥ç»“æœå¯„å­˜å™¨rdä¸­ã€‚
            PS:ä¸€èˆ¬ï¼Œè·³è½¬çš„ç›®æ ‡å¾€å¾€ä½¿ç”¨æ±‡ç¼–ç¨‹åºä¸­çš„labelï¼Œæ±‡ç¼–å™¨æ ¹æ®labelè‡ªåŠ¨è®¡ç®—åç§»é‡
- jalr(jump and link     register) ï¼š12ä½åç§»é‡ï¼ŒåŠ ä¸Šrs1ä¸­çš„å€¼ï¼Œå¾—åˆ°æœ€ç»ˆçš„è·³è½¬ç›®æ ‡åœ°å€ã€‚å°†ä¸‹ä¸€æ¡æŒ‡ä»¤PCï¼ˆå½“å‰PC+4)çš„å€¼ï¼Œå†™å…¥ç»“æœå¯„å­˜å™¨rdä¸­ã€‚

 

**ret** 

pc = x[1]

ä»å­è¿‡ç¨‹è¿”å›ã€‚å®é™…è¢«æ‰©å±•ä¸º jalr x0, 0(x1)ã€‚

 

**åŠ è½½ä¸å­˜å‚¨æŒ‡ä»¤**

**la rd, symbol**

x[rd] = &symbol

å°† symbol çš„åœ°å€åŠ è½½åˆ° x[rd]ä¸­ã€‚

 

**li rd, immediate**

x[rd] = immediate

å°†å¸¸é‡åŠ è½½åˆ° x[rd]ä¸­ã€‚

 

**lw rd, offset(rs1)**

x[rd] = sext(M[x[rs1] + sext(offset)][31:0])

ä»åœ°å€ x[rs1] + sign-extend(offset)è¯»å–å››ä¸ªå­—èŠ‚ï¼Œå†™å…¥ x[rd]ã€‚

 

**sw rs2, offset(rs1)**

M[x[rs1] + sext(offset) = x[rs2][31: 0]

å°† x[rs2]çš„ä½ä½ 4 ä¸ªå­—èŠ‚å­˜å…¥å†…å­˜åœ°å€ x[rs1]+sign-extend(offset)ã€‚
